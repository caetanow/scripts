<h1>Tratamento de erros no Java - Exceptions</h1>

Componentes de software podem ter problemas durante a execu√ß√£o e gerar erros como:

- Terminar o programa;
- Retornar uma mensagem de erro indicando uma falha;
- Retornar e ignorar o problema;
- Chamar um m√©todo para tratar o erro, entre outras.

Os problemas mais comumente encontrados s√£o:

- Falha na aquisi√ß√£o de um recurso (new, open...);
- Tentativa de fazer algo imposs√≠vel (divis√£o por zero, √≠ndice de um array inv√°lido...);
- Outras condi√ß√µes inv√°lidas (lista vazia, overflow...).

Para contornar estes empecilhos, utilizamos o recurso chamado **Exce√ß√µes (Exceptions)**.

<h2>1. Exceptions</h2>

As **Exce√ß√µes** (Exceptions) s√£o uma indica√ß√£o de um problema que ocorre durante a execu√ß√£o de um programa, ou seja, s√£o eventos que interrompem o fluxo normal de processamento de uma classe causando um erro na aplica√ß√£o. 

Na Linguagem Java, √© poss√≠vel tratar as exce√ß√µes, que normalmente interromperiam a execu√ß√£o da aplica√ß√£o, de forma que o programa continue funcionando ou termine de forma elegante, tornando o c√≥digo muito mais robusto e confi√°vel.

As Exce√ß√µes na Linguagem Java s√£o Objetos criados a partir de Classes especiais, que s√£o ‚Äúdisparados‚Äù quando ocorrem condi√ß√µes excepcionais durante a execu√ß√£o do c√≥digo. 

<h3>1.1 Tipos de erros</h2>


Os erros que acontecem nas aplica√ß√µes Java est√£o classificados em 3 categorias:

1. **Erros de l√≥gica:** Esta categoria abrange erros na constru√ß√£o do Algoritmo. Este tipo de erro devem ser corrigidos pelo programador

‚Äã		**Exemplos:** Limites do vetor ultrapassados, divis√£o por zero, entre outros;

2. **Erros devido a condi√ß√µes do ambiente de execu√ß√£o:** Esta categoria abrange erros na infraestrutura onde a aplica√ß√£o est√° sendo executada. Este tipo de erro foge do controle da pessoa desenvolvedora, mas podem ser contornados em tempo de execu√ß√£o;

‚Äã		**Exemplos:** arquivo n√£o encontrado, rede fora do ar, entre outros;

3. **Erros graves:** S√£o erros que simplesmente travam o sistema e n√£o h√° nada o que fazer. Este tipo de erro foge do controle da pessoa desenvolvedora e n√£o podem ser contornados;

‚Äã		**Exemplos:** falta de mem√≥ria, erro interno do Java, entre outros.

As Exce√ß√µes tem como foco principal tratar os erros do tipo 1, ou seja, erros de l√≥gica, como veremos no exemplo abaixo:

<br />

<img src="https://i.imgur.com/gsSDe7P.png" title="source: imgur.com" width="3%"/>**Exemplo 01 - Divis√£o entre 2 n√∫meros inteiros:** 

```java
package exceptions;

import java.util.Scanner;

public class Divisao {

	static Scanner ler = new Scanner(System.in);
	
	public static void main(String[] args) {
		
		int dividendo = 0;
		int divisor = 0;
			
		System.out.println("Digite o Dividendo: ");
		dividendo = ler.nextInt();
				
		System.out.println("Digite o Divisor: ");
		divisor = ler.nextInt();
				
		divide(dividendo, divisor);
		
	}

	public static void divide(int dividendo, int divisor) {
		System.out.println("Divis√£o = " + (dividendo / divisor));
	}

}
```

O c√≥digo acima, √© um programa simples, que recebe 2 n√∫meros inteiros e chama um m√©todo chamado dividir(), que far√° a divis√£o entre estes 2 n√∫mero. Execute o c√≥digo acima e digite os valores 10 e 0.

<img src="https://i.imgur.com/V2ReOnx.png" title="source: imgur.com" width="3%"/>**Resultado do Algoritmo:**

<div align="center"><img src="https://i.imgur.com/aTXz9R1.png" title="source: imgur.com" /></div>

Na imagem acima, vemos que foi disparada uma exce√ß√£o: **ArithmeticException** (indicado por uma seta amarela), informando que aconteceu algum erro em uma opera√ß√£o aritm√©tica (c√°lculo matem√°tico) e na sequ√™ncia o programa √© finalizado sem dar a oportunidade de contornar o erro. No exemplo acima, a exce√ß√£o indica que n√£o √© poss√≠vel efetuar a divis√£o de um n√∫mero por zero.

Execute o c√≥digo novamente e experimente inserir uma String ao inv√©s de um numero no segundo valor. 

<img src="https://i.imgur.com/V2ReOnx.png" title="source: imgur.com" width="3%"/>**Resultado do Algoritmo:**

<div align="center"><img src="https://i.imgur.com/IT55yyi.png" title="source: imgur.com" /></div>

Na imagem acima, vemos que desta vez foi disparada uma outra exce√ß√£o: **InputMismatchException** (indicado por uma seta amarela), informando que aconteceu algum erro na entrada de dados da aplica√ß√£o e na sequ√™ncia o programa √© finalizado sem dar a oportunidade de contornar o erro. No exemplo acima, a exce√ß√£o indica que a Classe Scanner estava aguardando por um n√∫mero inteiro e recebeu uma String.

<br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="25px"/> <a href="https://github.com/rafaelq80/exemplos_java/tree/main/exceptions/exceptions_v1" target="_blank"><b>C√≥digo fonte: Exemplo 01</b></a>

<br /><br />

Quando uma exce√ß√£o √© lan√ßada sem nenhum tipo de tratamento, ela interrompe o **fluxo normal** do programa, como vimos nos 2 exemplos acima. Se o m√©todo onde o erro aconteceu n√£o capturar a exce√ß√£o, ela ser√° **propagada** para o m√©todo que chamar esse m√©todo e assim por diante. Se **ningu√©m** capturar a exce√ß√£o, ela causar√° o t√©rmino da aplica√ß√£o. Agora se em algum lugar ela for capturada, **o controle da aplica√ß√£o pode ser recuperado**.

Um bom **Sistema de Tratamento de Exce√ß√µes** procura sempre atender a 3 princ√≠pios fundamentais: 

- Se antecipar aos problemas (uma das tarefas da pessoa desenvolvedora);
- Reverter situa√ß√µes de erro que podem ser revertidas;
- Buscar a **Solu√ß√£o ideal** para o tratamento de problemas de forma isolada do c√≥digo principal.

Com o tratamento de exce√ß√µes, o programa captura e trata o erro, isto √©, lida com a exce√ß√£o. Para capturar e lidar com as exce√ß√µes o Java utiliza a estrutura **try-catch-finally**.

<h2>2. Estrutura try-catch-finally</h2>

A estrutura **try-catch-finally** √© utilizada pelo Java para capturar e tratar um erro ou exce√ß√£o. Ela √© composta por 3 estruturas b√°sicas:

- **try:** √© usada para indicar um bloco de c√≥digo que possa lan√ßar (throw) uma exce√ß√£o. Caso ocorra uma exce√ß√£o em algum ponto, o restante do c√≥digo contido no bloco <em>try</em> n√£o ser√° executado. O bloco <em>try</em> n√£o pode ser declarado sozinho, portanto, precisa estar seguido de um ou v√°rios blocos <em>catch</em> e/ou de um bloco <em>finally</em>.
- **catch:** serve para manipular as exce√ß√µes, ou seja, tratar o erro. Esse bloco ser√° executado somente se o bloco <em>try</em> apresentar alguma exce√ß√£o. Numa estrutura try-catch-finally voc√™ pode criar um ou mais blocos <em>catch</em>, por√©m, ser√° executado apenas o primeiro bloco que identificar a exce√ß√£o.
- **finally:** √© um bloco opcional, mas caso seja constru√≠do, quase sempre ser√° executado, a menos que seja for√ßada sua parada, por exemplo, com um System.exit(0), no catch (finalizar a aplica√ß√£o independente do que estiver sendo processado). Dentro do bloco finally, poder√° conter outros blocos try-catch, bem como outro <em>finally</em>. Geralmente utilizamos o bloco finally quando precisamos executar algum c√≥digo independente se ocorrer a exception ou n√£o.

Na imagem abaixo, vemos a sintaxe da estrutura try-catch-finally dentro do c√≥digo Java:

<div align="center"><img src="https://i.imgur.com/Uwvqs3q.png" title="source: imgur.com" /></div>

O **Bloco try** cont√©m o c√≥digo que pode lan√ßar (throw) uma exce√ß√£o. Ele consiste na palavra ‚Äì chave try seguida por um bloco de c√≥digo entre chaves.

O **Bloco Catch** captura e trata uma exce√ß√£o. Ele come√ßa com a palavra-chave catch. Dentro dos par√™nteses deve ser inserido o par√¢metro de exce√ß√£o, que identifica o tipo da exce√ß√£o, ou seja, um Objeto da classe ou subclasse da poss√≠vel exce√ß√£o. O bloco de c√≥digo entre as chaves ser√° executado quando uma exce√ß√£o do tipo indicado no par√¢metro ocorre, ou seja, o que fazer em caso de erro.

O **Bloco Finally** se for constru√≠do, quase sempre ser√° executado. Geralmente ele cont√©m c√≥digo de libera√ß√£o de recursos do sistema. **Exemplo:** finalizar a conex√£o com uma Banco de dados

Na imagem abaixo, vemos a sintaxe da estrutura try-catch-finally dentro do c√≥digo Java:

<div align="center"><img src="https://i.imgur.com/hORZemU.png" title="source: imgur.com" /></div>

<br />

<h3>2.1 O comando de Sa√≠da System.err.println()</h3>

O comando de Sa√≠da **System.err.println()** funciona da mesma forma que O comando de Sa√≠da System.out.println(). A principal diferen√ßa √© que este comando √© usado principalmente para exibir os erros de exce√ß√£o no console. Alguns programas (como o Eclipse) mostrar√£o o texto na cor vermelha, para tornar mais √≥bvio que √© uma mensagem de erro.

Vamos implementar o tratamento de exce√ß√µes no exemplo 01:

<br />

<img src="https://i.imgur.com/gsSDe7P.png" title="source: imgur.com" width="3%"/>**Exemplo 02 - Divis√£o entre 2 n√∫meros inteiros com tratamento de exce√ß√µes:** 

```java
package exceptions;

import java.util.InputMismatchException;
import java.util.Scanner;

public class Divisao {

	static Scanner ler = new Scanner(System.in);
	
	public static void main(String[] args) {
		
		int dividendo = 0;
		int divisor = 0;
		boolean loop = true;
		
		do {
			
			try {
				System.out.println("Digite o Dividendo: ");
				dividendo = ler.nextInt();
						
				System.out.println("Digite o Divisor: ");
				divisor = ler.nextInt();
						
				divide(dividendo, divisor);
				
				loop = false;
				
			}catch(InputMismatchException e){
				System.err.println("\nExce√ß√£o: " + e);
				ler.nextLine();
				System.out.println("\nDigite valores inteiros!");
			}catch(ArithmeticException e){
				System.err.println("\nExce√ß√£o: " + e);
				ler.nextLine();
				System.out.println("\nDigite Numeros inteiros positivos!");
			}finally{
                System.out.println("\nSempre serei executada!\n");
            }
		
		}while (loop);
	}

	public static void divide(int dividendo, int divisor) {
		System.out.println("Divis√£o = " + (dividendo / divisor));
	}

}
```

Execute o c√≥digo acima e digite os valores 10 e 0, novamente.

<img src="https://i.imgur.com/V2ReOnx.png" title="source: imgur.com" width="3%"/>**Resultado do Algoritmo:**

<div align="center"><img src="https://i.imgur.com/ogfx67U.png" title="source: imgur.com" /></div>

<br />

Observe na imagem acima que a exce√ß√£o: **ArithmeticException**  (indicado pela seta rosa), foi disparada, mas desta vez foi exibida uma mensagem personalizada de alerta sobre o erro (indicada pela seta amarela). Como implementamos o bloco **finally**, tamb√©m ser√° exibida a mensagem criada dentro do bloco (indicada pela seta azul) e o programa ser√° reiniciado (seta verde), solicitando uma nova entrada de dados. 

<br />

| <img src="https://i.imgur.com/hOgWvSc.png" title="source: imgur.com" width="100px"/> | <div align="left"> **IMPORTANTE:** *Para ocultar a Exce√ß√£o que foi disparada (linha indicada pela seta rosa), e exibir apenas a mensagem personalizada, basta n√£o exibir no console o conte√∫do da vari√°vel e, que armazena a Exce√ß√£o capturada.* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

<br />

Experimente inserir uma String ao inv√©s de um numero no segundo valor. 

<img src="https://i.imgur.com/V2ReOnx.png" title="source: imgur.com" width="3%"/>**Resultado do Algoritmo:**

<div align="center"><img src="https://i.imgur.com/bkfjBs3.png" title="source: imgur.com" /></div>

Observe na imagem acima que a exce√ß√£o: **InputMismatchException**  (indicado pela seta rosa), foi disparada, mas desta vez foi exibida uma mensagem personalizada de alerta sobre o erro (indicada pela seta amarela). Como implementamos o bloco **finally**, tamb√©m ser√° exibida a mensagem criada dentro do bloco (indicada pela seta azul) e o programa ser√° reiniciado (seta verde), solicitando uma nova entrada de dados. 

Experimente inserir os valores 10 e 2:

<div align="center"><img src="https://i.imgur.com/JyB90KA.png" title="source: imgur.com" /></div>

Observe na imagem acima que nenhuma exce√ß√£o foi disparada e o c√°lculo da divis√£o foi efetuado com sucesso. Entretanto, como implementamos o comando **finally**, a mensagem (indicada pela seta azul) continuar√° sendo exibida, mesmo que nenhuma exce√ß√£o seja disparada.

<br />

<div align="left"><img src="https://i.imgur.com/JSfXyzm.png" title="source: imgur.com" width="30px"/> <a href="https://docs.oracle.com/javase/tutorial/essential/exceptions/handling.html" target="_blank"><b>Documenta√ß√£o: Try..Catch..Finally</b></a>

<div align="left"><img src="https://i.imgur.com/JSfXyzm.png" title="source: imgur.com" width="30px"/> <a href="https://docs.oracle.com/javase/7/docs/api/java/util/InputMismatchException.html" target="_blank"><b>Documenta√ß√£o: Classe InputMismatchException</b></a>

<div align="left"><img src="https://i.imgur.com/JSfXyzm.png" title="source: imgur.com" width="30px"/> <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/ArithmeticException.html" target="_blank"><b>Documenta√ß√£o: Classe ArithmeticException</b></a>

<br /><br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="25px"/> <a href="https://github.com/rafaelq80/exemplos_java/tree/main/exceptions/exceptions_v2" target="_blank"><b>C√≥digo fonte: Exemplo 02</b></a>

<br /><br />

<h2>3. Throws e Throw</h2>

A **cl√°usula throws** especifica as **exce√ß√µes que um m√©todo pode lan√ßar**. Ele √© inserida na assinatura do M√©todo, depois da lista de par√¢metros do m√©todo e antes do corpo do m√©todo. A cl√°usula throws cont√©m uma lista separada por v√≠rgulas das exce√ß√µes. As exce√ß√µes podem ser lan√ßadas pelas instru√ß√µes no corpo do m√©todo ou pelos m√©todos chamados. Veja o exemplo abaixo:

```java
	public static void divide(int dividendo, int divisor) throws ArithmeticException {
		System.out.println("Divis√£o = " + (dividendo / divisor));
	}
```

No exemplo acima, a clausula throws informa para a Classe que est√° chamando o M√©todo, que este m√©todo pode lan√ßar uma exce√ß√£o do tipo **ArithmeticException** no escopo do m√©todo. Isso obriga a fazer a captura dessa exception (<em>try-catch</em>) ou relan√ßar o throws. Na assinatura do M√©todo, pode ser inserida mais de uma exception na Cl√°usula throws.

A **cl√°usula throw lan√ßa uma exce√ß√£o em qualquer ponto do c√≥digo**, mas n√£o exige que ela seja tratada pela Classe que est√° chamando o M√©todo. Ela transfere o controle do fluxo para os m√©todos chamadores. Ela usa o que se chama  **unckecked exception**, ou seja, uma exce√ß√£o √© lan√ßada mas nada obriga ela a ser tratada. A palavra-chave throw √© usada principalmente para lan√ßar exce√ß√µes personalizadas. 

> **Exce√ß√£o Personalizada** √© uma Classe de exce√ß√£o criada pela pessoa desenvolvedora, para ser lan√ßada em um erro espec√≠fico, quando a o Java n√£o possui um tipo de exce√ß√£o adequado para o erro.

<br />

<img src="https://i.imgur.com/gsSDe7P.png" title="source: imgur.com" width="3%"/>**Exemplo 03 - Uso das clausulas Throws e Throw:** 

Vamos criar um novo projeto chamado **excecao_simples** e inserir a **Classe ExcecaoSimples**:

1. No lado esquerdo superior, na Guia **Package explorer**, clique com o bot√£o direito do mouse sobre a pasta **src**, como indicado na figura abaixo:

<div align="center"><img src="https://i.imgur.com/uR6s0hm.png" title="source: imgur.com" /></div>

2. Na sequ√™ncia, clique na op√ß√£o **New ü°™ Class**.

<div align="center"><img src="https://i.imgur.com/5viAy85.png" title="source: imgur.com" /></div>

3. Na janela **New Java Class**, no item **Name**, digite o nome da Classe **ExcecaoSimples** e desmarque a op√ß√£o **public static void main(String[] args)**, como mostra a figura abaixo:

<div align="center"><img src="https://i.imgur.com/IeLenJH.png" title="source: imgur.com" /></div>

4. Clique no bot√£o **Finish** para concluir.

5. Insira o c√≥digo abaixo na Classe ExcecaoSimples:

```java
package excecao_simples;

public class ExcecaoSimples extends Exception {

	private static final long serialVersionUID = 1L;
	
	public ExcecaoSimples () {}
    
	public ExcecaoSimples (String mensagem) {
		super(mensagem);
	}
}
```

A Classe **ExcecaoSimples** foi definida como uma heran√ßa da Classe **Exception**.

> **Heran√ßa** √© um tipo de Relacionamento entre Classes no Java e uma das maiores vantagens da Programa√ß√£o Orientada a Objetos, permitindo que o c√≥digo seja reutilizado. Em Java, √© poss√≠vel herdar **atributos** e **comportamentos** (**m√©todos**) de uma classe para outra. A palavra extends inserida na assinatura da Classe, indica que a Classe est√° herdando uma outra Classe.

Observe que foi definido dentro da **Classe ExcecaoSimples** o Atributo ` private static final long serialVersionUID = 1L `. Este Atributo  √© um identificador usado para serializar e desserializar um Objeto de uma Classe do tipo Serializable. 

**Simplificando, usamos o atributo serialVersionUID para lembrar as vers√µes de uma classe Serializable, com o objetivo de verificar se uma classe carregada e o objeto serializado s√£o compat√≠veis.** Na pr√°tica, esse n√∫mero seria a vers√£o da sua classe. 

> **Serializa√ß√£o**
>
> √â o processo onde o Java pega o valor de  cada atributo e gera uma sequ√™ncia de bytes. Junto com essa sequ√™ncia de bytes √© acrescentado o `serialVersionUID`, que √© um c√≥digo de identifica√ß√£o da vers√£o da Classe.
>
> **Desserializa√ß√£o** 
>
> √â o processo inverso, ou seja, o Java pega uma sequ√™ncia  de bytes e coloca nos atributos de um novo objeto. Antes de fazer isso,  ele verifica se o `serialVersionUID` salvo √© igual ao serial do novo objeto que est√° sendo criado. Esse n√∫mero √© utilizado para garantir que uma classe  carregada corresponde exatamente a um objeto serializado. Se nenhuma  correspond√™ncia do objeto for encontrada, ent√£o √© lan√ßada uma exce√ß√£o do tipo **InvalidClassException**, ou seja, a vers√£o do serial UID da classe n√£o corresponde √† do descritor de classe.
>
> Em tese, isso permite voc√™ salvar uma "fotografia" de um Objeto, por  exemplo, num arquivo em disco e depois restaurar o objeto com os mesmos  valores posteriormente.
>
> **Por que o Eclipse emite um aviso?**
>
> Para um objeto ser serializado ele precisa ser marcado com a interface `java.io.Serializable`. Se o Eclipse (ou alguma outra ferramenta que analisa o c√≥digo), encontrar uma Classe que implementa `Serializable` direta ou indiretamente, ele entende que √© uma boa pr√°tica especificar um `serialVersionUID`.
>
> Isso pode ocorrer se a classe:
>
> - Implementa `Serializable`;
> - Implementa uma interface que estende `Serializable`;
> - Estende uma classe que implementa `Serializable`.
>
> No exemplo acima, a **Classe Exception** estende a **Classe Throwable**, que implementa a **Classe Serializable**. Por isso que o Eclipse exige a inser√ß√£o deste Atributo na Classe.

Na sequ√™ncia, foram criados 2 M√©todos Construtores, herdados da Classe Exception, onde o primeiro √© um Construtor vazio e o segundo √© um Construtor com o par√¢metro **mensagem**, que permite personalizar a mensagem de erro. A Classe Exception possui outros M√©todos Construtores com outros par√¢metros.

<br />

<div align="left"><img src="https://i.imgur.com/JSfXyzm.png" title="source: imgur.com" width="30px"/> <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html" target="_blank"><b>Documenta√ß√£o: Classe Throwable</b></a>

<div align="left"><img src="https://i.imgur.com/JSfXyzm.png" title="source: imgur.com" width="30px"/> <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html" target="_blank"><b>Documenta√ß√£o: Classe Exception</b></a>
<div align="left"><img src="https://i.imgur.com/JSfXyzm.png" title="source: imgur.com" width="30px"/> <a href="https://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html" target="_blank"><b>Documenta√ß√£o: Interface Serializable</b></a>
<br />
<br />

Na sequ√™ncia, vamos criar a Classe **TestaExcecao**, para testarmos a nossa Classe ExcecaoSimples:

1. No lado esquerdo superior, na Guia **Package explorer**, clique com o bot√£o direito do mouse sobre a pasta **src**, como indicado na figura abaixo:

<div align="center"><img src="https://i.imgur.com/uR6s0hm.png" title="source: imgur.com" /></div>

2. Na sequ√™ncia, clique na op√ß√£o **New ü°™ Class**.

<div align="center"><img src="https://i.imgur.com/5viAy85.png" title="source: imgur.com" /></div>

3. Na janela **New Java Class**, no item **Name**, digite o nome da Classe **TestaExcecao** e marque a op√ß√£o **public static void main(String[] args)**, como mostra a figura abaixo:

<div align="center"><img src="https://i.imgur.com/R6tKy3L.png" title="source: imgur.com" /></div>

4. Clique no bot√£o **Finish** para concluir.

5. Insira o c√≥digo abaixo na **Classe TestaExcecao**:

```java
package excecao_simples;

public class TestaExcecao {

	public static void main(String[] args) throws ExcecaoSimples {

		String nomes[] = { "Jo√£o", "Maria", "Pedro", "Manuela" };

		try {
			for (int i = 0; i < nomes.length; i++) {
				System.out.println(nomes[i]);
			}
		} catch (ArrayIndexOutOfBoundsException e) {
			System.err.println("\nExce√ß√£o: " + e);
			System.out.println("\nPosi√ß√£o Inv√°lida");
		}
		
		throw new ExcecaoSimples("Exce√ß√£o Simples!");

	}

}

```

Observe que foi inserido no final do c√≥digo a linha **throw new ExcecaoSimples("Exce√ß√£o Simples!")**. Nesta linha, estamos lan√ßando a exce√ß√£o criada na **Classe ExcecaoSimples**, independente ter acontecido um erro, ou seja, ela ser√° lan√ßada de qualquer forma. Veja o resultado no console abaixo:

<img src="https://i.imgur.com/V2ReOnx.png" title="source: imgur.com" width="3%"/>**Resultado do Algoritmo:**

<div align="center"><img src="https://i.imgur.com/dZ2rsnQ.png" title="source: imgur.com" /></div>

Observe que mesmo a Exception **ArrayIndexOutOfBoundsException** n√£o sendo disparada, a Exception exce√ß√£o simples foi disparada. Ao utilizar o comando throw, automaticamente o Java nos obrigar√° a inserir a clausula throws na assinatura do M√©todo, indicando a Exception que poder√° ser lan√ßada.

Este recurso √© √∫til quando queremos lan√ßar uma exce√ß√£o em um condicional, por exemplo, caso uma condi√ß√£o n√£o seja satisfeita.

<br />

<div align="left"><img src="https://i.imgur.com/JSfXyzm.png" title="source: imgur.com" width="30px"/> <a href="https://docs.oracle.com/javase/tutorial/essential/exceptions/declaring.html" target="_blank"><b>Documenta√ß√£o: Throws</b></a>

<div align="left"><img src="https://i.imgur.com/JSfXyzm.png" title="source: imgur.com" width="30px"/> <a href="https://docs.oracle.com/javase/tutorial/essential/exceptions/throwing.html" target="_blank"><b>Documenta√ß√£o: Throw</b></a>
<div align="left"><img src="https://i.imgur.com/JSfXyzm.png" title="source: imgur.com" width="30px"/> <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/ArrayIndexOutOfBoundsException.html" target="_blank"><b>Documenta√ß√£o: Classe ArrayIndexOutOfBoundsException</b></a>
<br />
<br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="25px"/> <a href="https://github.com/rafaelq80/exemplos_java/tree/main/exceptions/excecao_simples" target="_blank"><b>C√≥digo fonte: Exemplo 03</b></a>


<br />

<h2>4. Hierarquia das Exceptions</h2>

<div align="center"><img src="https://www.oracle.com/technetwork/es/images/img1-5928057.png" title="source: imgur.com" /></div>

- **Throwable:** √â a m√£e de todas as exce√ß√µes.
- **Error:** N√£o s√£o exce√ß√µes, e sim erros que jamais poderiam ter acontecido, como estouro da mem√≥ria, por exemplo.
- **Exception:** S√£o as classes que deveriam aqui, lan√ßar exce√ß√µes e n√£o erros de programa√ß√£o. Exemplo: tentar abrir um arquivo que n√£o existe. Ent√£o, √© lan√ßada uma exce√ß√£o verificada, porque a classe de leitura de arquivos deriva de Exception.
- **RuntimeException**: S√£o exce√ß√µes que indicam erros de programas (n√£o de l√≥gica, pois sen√£o n√£o passaria pelo compilador). Esse tipo de exce√ß√£o √© conhecida como n√£o verificada. 

<h3>4.1. Exce√ß√µes Integradas</h3>

As exce√ß√µes integradas s√£o as exce√ß√µes dispon√≠veis nas bibliotecas Java. Essas exce√ß√µes s√£o adequadas para explicar certas situa√ß√µes de erro. Na tabela abaixo, vemos as Exce√ß√µes mais utilizadas:

| Exce√ß√£o                            | Descri√ß√£o                                                    |
| ---------------------------------- | ------------------------------------------------------------ |
| **ArithmeticException**            | Esta exce√ß√£o √© lan√ßada quando ocorre uma condi√ß√£o excepcional em uma opera√ß√£o aritm√©tica. |
| **ArrayIndexOutOfBoundsException** | Esta exce√ß√£o √© lan√ßada para indicar que um array foi acessado com um √≠ndice ilegal. O √≠ndice √© negativo ou maior ou igual ao tamanho da matriz. |
| **ClassNotFoundException**         | Esta exce√ß√£o √© gerada quando tentamos acessar uma classe cuja defini√ß√£o n√£o foi encontrada |
| **FileNotFoundException**          | Esta exce√ß√£o √© gerada quando um arquivo n√£o est√° acess√≠vel ou n√£o abre. |
| **InvalidClassException**          | Esta exce√ß√£o √© gerada quando em tempo de execu√ß√£o da serializa√ß√£o de um Objeto for detectado um dos seguintes problemas com uma classe: <br />1. A vers√£o do serial UID da classe n√£o corresponde √† do descritor de classe; <br />2. A classe cont√©m tipos de dados desconhecidos;<br />3. A classe n√£o tem um construtor acess√≠vel. |
| **IOException**                    | Esta exce√ß√£o √© lan√ßada quando uma opera√ß√£o de entrada-sa√≠da falha ou √© interrompida |
| **NoSuchFieldException**           | Esta exce√ß√£o √© lan√ßada quando uma classe n√£o cont√©m o Atributo ou vari√°vel especificada |
| **NoSuchMethodException**          | Esta exce√ß√£o √© lan√ßada ao acessar um m√©todo que n√£o foi encontrado |
| **NullPointerException**           | Esta exce√ß√£o √© gerada ao se referir aos membros de um objeto nulo. Nulo n√£o representa nada. Para evitar esta exce√ß√£o √© muito comum utilizar a Classe  [Optional](https://github.com/rafaelq80/cookbook_java/blob/main/16.md). |
| **NumberFormatException**          | Esta exce√ß√£o √© gerada quando um m√©todo n√£o pode converter uma String em um formato num√©rico (int, float, double, entre outros). |
| **RuntimeException**               | Esta exce√ß√£o representa uma exce√ß√£o que ocorre durante o tempo de execu√ß√£o |
| **IllegalArgumentException**       | Esta exce√ß√£o lan√ßar√° o erro ou declara√ß√£o de erro quando o m√©todo receber um argumento que n√£o se ajuste com precis√£o √† rela√ß√£o ou a condi√ß√£o fornecida. |
| **IllegalStateException**          | Esta exce√ß√£o lan√ßar√° um erro ou mensagem de erro quando o m√©todo n√£o for acessado para executar uma opera√ß√£o espec√≠fica no aplicativo. |

<br />

------

## üîë**Pontos chave:**

1. **Exce√ß√µes** em Java s√£o classes especiais utilizadas para manipular erros que podem surgir durante a execu√ß√£o.
2. *O* **bloco try/catch/finally** permite capturar exce√ß√µes que podem ocorrer quando uma parcela de c√≥digo ou fun√ß√£o √© executada.
3. A **cl√°usula throws** especifica as **exce√ß√µes que um m√©todo pode lan√ßar**. Ele √© inserida na assinatura do M√©todo, depois da lista de par√¢metros do m√©todo e antes do corpo do m√©todo. A cl√°usula throws cont√©m uma lista separada por v√≠rgulas das exce√ß√µes. As exce√ß√µes podem ser lan√ßadas pelas instru√ß√µes no corpo do m√©todo ou pelos m√©todos chamados. 
4. A **cl√°usula throw lan√ßa uma exce√ß√£o em qualquer ponto do c√≥digo**, mas n√£o exige que ela seja tratada por seus chamadores. Ela transfere o  controle do fluxo para os m√©todos chamadores. Ela usa o que se chama  **unckecked exception**, ou seja, uma exce√ß√£o √© lan√ßada mas nada obriga ela  ser tratada.
5. Voc√™ tamb√©m pode criar e lan√ßar exce√ß√µes personalizadas.

<br />

------

<h1>Projeto Conta Banc√°ria</h1>

Nesta etapa, vamos implementar o **M√©todo keyPress()** na Classe Menu. Este M√©todo tem por Objetivo exigir que a tecla **enter** do seu teclado seja pressionada para finalizar uma op√ß√£o do Menu. No est√°gio atual, quando voc√™ seleciona uma op√ß√£o do Menu, ele mostra a mensagem e recarrega o Menu novamente. Com o M√©todo **keyPress()**, o Menu ser√° recarregado somente depois de pressionar a tecla enter.

<h2>üë£ Passo 01 - Atualizar a Classe Menu</h2>

1. Abra a Classe Menu;
2. Adicione a estrutura **Try...Catch** na vari√°vel **opcao**, como mostra a figura abaixo:

<div align="center"><img src="https://i.imgur.com/XxRLnnY.png" title="source: imgur.com" /></div>

A estrutura **Try...Catch** foi implementada na entrada de dados via teclado da vari√°vel **opcao** (recebe o numero do item do menu) para capturar eventuais erros de digita√ß√£o. No nosso Menu, caso seja digitado um valor diferente de um n√∫mero inteiro, ser√° exibida a mensagem: **Digite valores inteiros!**. Na sequ√™ncia, a vari√°vel **opcao** ser√° reiniciada (valor zero) e ser√° solicitado a digita√ß√£o de um novo numero.

3. Adicione o M√©todo **keyPress()**, depois do M√©todo main(), como mostra a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/yW1hgBr.png" title="source: imgur.com" /></div>

Observe que a estrutura **Try...Catch** foi implementada na entrada de dados via teclado do M√©todo **keyPress()** para capturar eventuais erros.

O m√©todo **System.in.read()** indica a leitura de um dispositivo de entrada padr√£o (teclado), lendo as teclas que foram processadas. Quando for digitada tecla <Enter>, os dados do buffer nativo s√£o transferidos para a JVM e o primeiro byte digitado √© retornado ao  usu√°rio e retirado do buffer. Por√©m se o buffer nativo estiver vazio, o  m√©todo retorna -1. No caso do M√©todo **keyPress()**, ao pressionar a tecla <Enter>, automaticamente o Menu √© reiniciado.

> **Buffer** de dados √© uma regi√£o de mem√≥ria f√≠sica utilizada para armazenar temporariamente os dados enquanto eles est√£o sendo movidos de  um lugar para outro. Ao pressionar a tecla <Enter>, os dados s√£o enviados para a JVM.

4. Adicione chamadas para o M√©todo **keyPress()** em todas as op√ß√µes da estrutura **Switch Case do Menu**, como mostra a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/4otpQR8.png" title="source: imgur.com" /></div>

Observe que em todas as op√ß√µes da estrutura **Switch Case do Menu**, foram adicionadas a chamada do M√©todo **keyPress()**.

5. O c√≥digo completo da Classe Menu, voc√™ confere abaixo:

```java
package conta;

import java.io.IOException;
import java.util.InputMismatchException;
import java.util.Scanner;

import contabancaria.model.ContaCorrente;
import contabancaria.model.ContaPoupanca;
import contabancaria.util.Cores;

public class Menu {

	public static Scanner leia = new Scanner(System.in);

	public static void main(String[] args) {

		int opcao = 0;

		// Teste da Classe Conta Corrente
		ContaCorrente cc1 = new ContaCorrente(1, 123, 1, "Adriana", 10000.0f, 1000.0f);
		cc1.visualizar();
		cc1.sacar(12000.0f);
		cc1.visualizar();
		cc1.depositar(5000.0f);
		cc1.visualizar();

		// Teste da Classe Conta Poupan√ßa
		ContaPoupanca cp1 = new ContaPoupanca(2, 123, 2, "Victor", 100000.0f, 15);
		cp1.visualizar();
		cp1.sacar(1000.0f);
		cp1.visualizar();
		cp1.depositar(5000.0f);
		cp1.visualizar();

		while (true) {

			System.out.println(Cores.TEXT_YELLOW + Cores.ANSI_BLACK_BACKGROUND
					+ "*****************************************************");
			System.out.println("                                                     ");
			System.out.println("                BANCO DO BRAZIL COM Z                ");
			System.out.println("                                                     ");
			System.out.println("*****************************************************");
			System.out.println("                                                     ");
			System.out.println("            1 - Criar Conta                          ");
			System.out.println("            2 - Listar todas as Contas               ");
			System.out.println("            3 - Buscar Conta por Numero              ");
			System.out.println("            4 - Atualizar Dados da Conta             ");
			System.out.println("            5 - Apagar Conta                         ");
			System.out.println("            6 - Sacar                                ");
			System.out.println("            7 - Depositar                            ");
			System.out.println("            8 - Transferir valores entre Contas      ");
			System.out.println("            9 - Sair                                 ");
			System.out.println("                                                     ");
			System.out.println("*****************************************************");
			System.out.println("Entre com a op√ß√£o desejada:                          ");
			System.out.println("                                                     " + Cores.TEXT_RESET);
			
			try {
				opcao = leia.nextInt();
			}catch(InputMismatchException e){
				System.out.println("\nDigite valores inteiros!");
				leia.nextLine();
				opcao=0;
			}

			if (opcao == 9) {
				System.out.println("\nBanco do Brazil com Z - O seu futuro come√ßa aqui!");
				leia.close();
				System.exit(0);
			}

			switch (opcao) {
			case 1:
				System.out.println("\n Criar Conta");

				keyPress();
				break;
			case 2:
				System.out.println("\n Listar todas as Contas");

				keyPress();
				break;
			case 3:
				System.out.println("\n Buscar Conta por n√∫mero");

				keyPress();
				break;
			case 4:
				System.out.println("\n Atualizar dados da Conta");

				keyPress();
				break;
			case 5:
				System.out.println("\n Apagar Conta");

				keyPress();
				break;
			case 6:
				System.out.println("\n Sacar");

				keyPress();
				break;
			case 7:
				System.out.println("\n Depositar");

				keyPress();
				break;
			case 8:
				System.out.println("\n Transferir");

				keyPress();
				break;
			default:
				System.out.println("\nOp√ß√£o Inv√°lida" + Cores.TEXT_RESET);
				
				keyPress();
				break;
			}
		}
	}

	public static void keyPress() {

		try {

			System.out.println(Cores.TEXT_RESET + "\n\nPressione Enter para Continuar...");
			System.in.read();

		} catch (IOException e) {

			System.out.println("Voc√™ pressionou uma tecla diferente de enter!");

		}
	}
}
```

6. Salve e execute o projeto clicando no bot√£o <img src="https://i.imgur.com/t28CIT4.png" title="source: imgur.com" width="4%"/>**Run**. 
7. O resultado voc√™ confere na anima√ß√£o abaixo:

<div align="center"><img src="https://i.imgur.com/r5U6dkp.gif" title="source: imgur.com" /></div>

Observe que ao escolher qualquer op√ß√£o do menu (1-8), ele aguarda para at√© que a tecla enter seja pressionada para retornar ao menu novamente. Caso seja digitado um valor diferente de um numero inteiro na escolha da op√ß√£o do menu, a mensagem de erro √© exibida e o menu √© reiniciado. Se pressionar o numero 9, o sistema √© finalizado.

<br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="25px"/> <a href="https://github.com/rafaelq80/conta_bancaria_java/blob/06_Menu_Exceptions/src/conta/Menu.java" target="_blank"><b>C√≥digo fonte: Menu.java</b></a>

<br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="25px"/> <a href="https://github.com/rafaelq80/conta_bancaria_java/tree/06_Menu_Exceptions" target="_blank"><b>C√≥digo fonte: Projeto Conta Banc√°ria</b></a>

<br /><br />

<div align="left"><a href="README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>
